# PeopleFind

Проект **PeopleFind** — это веб-приложение, разработанное на Django, предназначенное для поиска людей по интересам.
Проект использует PostgreSQL в качестве основной базы данных, Redis для кэширования и Celery для выполнения фоновых
задач.

## Технологии

- **Django**: Веб-фреймворк для быстрой разработки на Python.
- **PostgreSQL**: Реляционная база данных для хранения структурированных данных.
- **Redis**: Используется для кэширования и в качестве брокера сообщений для Celery.
- **Celery**: Библиотека для выполнения асинхронных и фоновых задач.

## Установка и настройка

### Предварительные требования

- Python 3.8+
- PostgreSQL
- Redis
- Установленный `pip` и `virtualenv` (рекомендуется)

### Шаги для установки

1. **Создайте виртуальное окружение и установите зависимости**:
   ```bash
   python -m venv venv
   source venv/bin/activate  # Для Linux/MacOS
   # venv\Scripts\activate    # Для Windows
   pip install -r requirements.txt
   ```

2. **Настройка проекта**
    1. Скопируйте файл `.env_sample` в `.env`:
       ```bash
       cp .env_sample .env
       ```
    2. Заполните файл .env своими значениями:

       **PostgreSQL**: Укажите данные для подключения к вашей базе данных.

       **Redis**: Укажите адрес Redis-сервера, если используете кэширование.

       **Email**: Укажите данные для отправки электронных писем (должна использоваться gmail почта).

3. **Создайте базу данных в PostgreSQL путём ввода команды из корневой папки проекта**:
     ```bash
     python manage.py ссdb
     ```

4. **Создайте и примените миграции**:
   ```bash
   python manage.py makemigrations
   python manage.py migrate
   ```

5. **Создайте суперпользователя**:
   ```bash
   python manage.py ccsu
   ```

6. **Запустите Redis в отдельной командной строке**:
   ```bash
   redis-server
   ```

7. **Запустите Celery worker в отдельной командной строке**:
   ```bash
   python manage.py runcelery
   ```

8. (опционально)**Установить базовую фикстуру интересов**:
   ```bash
   python manage.py loaddata interests.json
   ```

9. **Запустите сервер разработки**:
   ```bash
   python manage.py runserver
   ```

   Теперь проект будет доступен по адресу: [http://127.0.0.1:8000](http://127.0.0.1:8000).

## Использование

- **Админка Django**: Доступна по адресу [http://127.0.0.1:8000/admin](http://127.0.0.1:8000/admin). Используйте учетные
  данные суперпользователя для входа.

## Команды для тестирования

1. **Создание случайных пользователей**
   ```bash
   python manage.py ccru --count 5
   ```
   Параметры:
    - --count: количество созданных пользователей (по умолчанию: 5)
2. **Создание случайных топиков**
    ```bash
   python manage.py ccrtopics 
    ```
   Параметры:
    - --count: количество созданных топиков (по умолчанию: 10)
    - --user_id: если ввести id пользователя, топики будут сгенерированы от пользователя с указанным id
    - --interest_id: если ввести id интереса, топики будут сгенерированы для интереса с указанным id
3. **Создание случайных комментариев**
    ```bash
   python manage.py ccrcomments
    ```
   Параметры:
    - --count: количество созданных комментариев (по умолчанию: 10)
    - --user_id: если ввести id пользователя, комментарии будут сгенерированы от пользователя с указанным id
    - одно из двух (--interest_id, --topic_id): если ввести id, комментарии будут сгенерированы для интереса или топика
      с указанным id

*Для всех созданных пользователей устанавливается пароль qwerty
